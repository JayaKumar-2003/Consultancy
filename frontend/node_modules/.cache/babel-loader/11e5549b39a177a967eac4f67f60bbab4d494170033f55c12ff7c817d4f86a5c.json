{"ast":null,"code":"import _regeneratorRuntime from\"D:/React_project/Consultancy/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/React_project/Consultancy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React_project/Consultancy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import'./ViewEmployee.css';import Axios from'axios';import{Store}from'../Store';import FloatingEmp from'./FloatingEmp';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ViewEmployee(){// Search State\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),search=_useState2[0],Setsearch=_useState2[1];//  const [searchdb,Setsearchdb] = useState([]);\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),searchdiv=_useState4[0],Setsearchdiv=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],Setcontent=_useState6[1];// end of state\n// view state\nvar _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),view=_useState8[0],Setview=_useState8[1];// get from db\nvar _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var userInfo=state.userInfo,employee_view=state.employee_view;var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$Axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return Axios.get('http://localhost:5000/api/employee/search',{headers:{authorization:\"brearer\".concat(userInfo.token)}});case 4:_yield$Axios$get=_context.sent;data=_yield$Axios$get.data;ctxDispatch({type:'EMPLOYEE_VIEW',payload:data});localStorage.setItem('employee_view',JSON.stringify(data));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function fetchUser(_x){return _ref.apply(this,arguments);};}();useEffect(function(){fetchUser();},[]);// get from db end\n// ctxDispatch({type:\"EMPLOYEE_VIEW\",payload:searchdb})\n// localStorage.setItem('employee_view',JSON.stringify(searchdb))\nvar SearchHandler=function SearchHandler(e){employee_view.map(function(i){if(i.phonenumber==search){return Setcontent(i);}else{return console.log('not');}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"ViewEmployee\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-bar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-inside\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:function onChange(e){Setsearch(e.target.value);Setsearchdiv(true);Setview(false);}}),/*#__PURE__*/_jsx(\"span\",{onClick:SearchHandler,children:/*#__PURE__*/_jsx(\"span\",{class:\"material-symbols-outlined pointer\",children:\"search\"})})]})}),searchdiv&&/*#__PURE__*/_jsx(\"div\",{className:\"search\",children:/*#__PURE__*/_jsx(FloatingEmp,{item:content})}),view&&/*#__PURE__*/_jsx(\"div\",{className:\"emp-details\",children:employee_view.map(function(item){return/*#__PURE__*/_jsx(FloatingEmp,{item:item});})}),/*#__PURE__*/_jsx(\"div\",{})]});}export default ViewEmployee;","map":{"version":3,"names":["React","useContext","useEffect","useState","Axios","Store","FloatingEmp","jsx","_jsx","jsxs","_jsxs","ViewEmployee","_useState","_useState2","_slicedToArray","search","Setsearch","_useState3","_useState4","searchdiv","Setsearchdiv","_useState5","_useState6","content","Setcontent","_useState7","_useState8","view","Setview","_useContext","state","ctxDispatch","dispatch","userInfo","employee_view","fetchUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","_yield$Axios$get","data","wrap","_callee$","_context","prev","next","preventDefault","get","headers","authorization","concat","token","sent","type","payload","localStorage","setItem","JSON","stringify","t0","console","log","stop","_x","apply","arguments","SearchHandler","map","i","phonenumber","className","children","onChange","target","value","onClick","class","item"],"sources":["D:/React_project/Consultancy/frontend/src/Components/ViewEmployee.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport './ViewEmployee.css';\r\nimport Axios from 'axios';\r\nimport { Store } from '../Store';\r\nimport FloatingEmp from './FloatingEmp';\r\n\r\nfunction ViewEmployee() {\r\n\r\n        // Search State\r\n        const [search,Setsearch] = useState('');\r\n      //  const [searchdb,Setsearchdb] = useState([]);\r\n        const [searchdiv,Setsearchdiv] = useState(false);\r\n        const [content,Setcontent] = useState([]);\r\n        // end of state\r\n\r\n        // view state\r\n        const [view,Setview] = useState(true);\r\n\r\n        // get from db\r\n        const {state,dispatch :ctxDispatch} = useContext(Store);\r\n        const {userInfo,employee_view} = state;\r\n        const fetchUser= async(e)=>{\r\n                e.preventDefault();\r\n                try{\r\n                        const {data} = await Axios.get('http://localhost:5000/api/employee/search',{\r\n                                headers :{authorization:`brearer${userInfo.token}`}\r\n                        });\r\n                        ctxDispatch({type:'EMPLOYEE_VIEW',payload:data})\r\n                        localStorage.setItem('employee_view',JSON.stringify(data));\r\n                }catch(err) {\r\n                        console.log(err);\r\n                }\r\n        }\r\n        useEffect(()=>{\r\n                fetchUser();\r\n        },[]);\r\n        // get from db end\r\n\r\n        \r\n        // ctxDispatch({type:\"EMPLOYEE_VIEW\",payload:searchdb})\r\n        // localStorage.setItem('employee_view',JSON.stringify(searchdb))\r\n        \r\n\r\n        const SearchHandler =(e)=>{\r\n                employee_view.map((i)=>{\r\n                        if(i.phonenumber == search) {\r\n                                return Setcontent(i);\r\n                        }\r\n                        else {\r\n                               return console.log('not');\r\n                        }\r\n                });      \r\n        }\r\n        return(\r\n        <div className='ViewEmployee'>\r\n            <div className='search-bar'>\r\n                <div className='search-inside'>\r\n                        <input type='number' onChange={(e)=>{Setsearch(e.target.value);Setsearchdiv(true);Setview(false);}}></input>\r\n                        <span onClick={SearchHandler}><span class=\"material-symbols-outlined pointer\">search</span></span>\r\n                </div>\r\n            </div>\r\n       {searchdiv && <div className='search' >\r\n                        <FloatingEmp item={content}></FloatingEmp>\r\n        </div> }\r\n         { view && <div className='emp-details'>\r\n                {employee_view.map((item)=>\r\n                        <FloatingEmp item={item}></FloatingEmp>)}\r\n           </div>}\r\n            <div>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n        );\r\n}\r\n\r\nexport default ViewEmployee;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}