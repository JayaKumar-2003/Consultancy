{"ast":null,"code":"import _regeneratorRuntime from\"D:/React_project/Consultancy/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/React_project/Consultancy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React_project/Consultancy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from'react';import Sewing from'../img/Sewing.jpg';import Axios from'axios';import'./SigninScreen.css';import{Store}from'../Store';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SigninScreen(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],Setemail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],Setpassword=_useState4[1];var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var userInfo=state.userInfo;console.log(userInfo);var SubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$Axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return Axios.post('http://localhost:5000/api/users/signin',{email:email,password:password});case 4:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;ctxDispatch({type:'USER_SIGNIN',payload:data});localStorage.setItem('userInfo',JSON.stringify(data));//  console.log('entererd');\nnavigate('/dashboard');_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));return function SubmitHandler(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(userInfo){navigate('/dashboard');}else{navigate('/');}},[userInfo]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Signin\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"content-left\",children:/*#__PURE__*/_jsx(\"img\",{src:Sewing,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-right\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"brand\",children:\"Shri Bhagavathi Amman\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:SubmitHandler,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Email Address:\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",onChange:function onChange(e){Setemail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:function onChange(e){Setpassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{value:\"Submit\"})]})]})]});}export default SigninScreen;","map":{"version":3,"names":["useContext","useEffect","useState","Sewing","Axios","Store","useNavigate","jsx","_jsx","jsxs","_jsxs","SigninScreen","_useState","_useState2","_slicedToArray","email","Setemail","_useState3","_useState4","password","Setpassword","navigate","_useContext","state","ctxDispatch","dispatch","userInfo","console","log","SubmitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","_yield$Axios$post","data","wrap","_callee$","_context","prev","next","preventDefault","post","sent","type","payload","localStorage","setItem","JSON","stringify","t0","stop","_x","apply","arguments","className","children","src","alt","onSubmit","onChange","target","value"],"sources":["D:/React_project/Consultancy/frontend/src/Screens/SigninScreen.js"],"sourcesContent":["import  { useContext,useEffect,useState } from 'react';\r\nimport Sewing from '../img/Sewing.jpg';\r\nimport Axios from 'axios';\r\nimport './SigninScreen.css';\r\nimport {Store} from '../Store';\r\nimport {useNavigate} from 'react-router-dom';\r\n\r\nfunction SigninScreen() {\r\n\r\n    const [email,Setemail] =useState('');\r\n    const [password,Setpassword] = useState('');\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const {state,  dispatch : ctxDispatch} =useContext(Store);\r\n    const {userInfo} = state;\r\n    console.log(userInfo);\r\n    const SubmitHandler = async (e) => {\r\n            e.preventDefault();\r\n            try {\r\n                const {data} =  await Axios.post('http://localhost:5000/api/users/signin',\r\n                    {\r\n                        email,\r\n                        password,\r\n                    }\r\n                );\r\n             ctxDispatch({type: 'USER_SIGNIN',payload:data})\r\n             localStorage.setItem('userInfo',JSON.stringify(data));\r\n            //  console.log('entererd');\r\n             navigate('/dashboard');\r\n            }\r\n            catch(err) {\r\n                console.log(err);\r\n            }\r\n    };\r\n    \r\n    useEffect(() => {\r\n            if(userInfo) {\r\n                    navigate('/dashboard');\r\n                }else {\r\n                    navigate('/');\r\n                }\r\n            \r\n     },[userInfo])\r\n    return(\r\n        \r\n        <div className='Signin'>\r\n            <div className='content-left'>\r\n                <img src={Sewing} alt=\"\"></img>\r\n            </div>\r\n            <div className='content-right'>\r\n                <label className='brand'>Shri Bhagavathi Amman</label>\r\n                <form className='form' onSubmit={SubmitHandler}>\r\n                   <label>Email Address:<input type=\"email\"  onChange={(e)=> {Setemail(e.target.value)}}></input></label>\r\n                    <label>Password:<input type=\"password\"  onChange={(e)=>{Setpassword(e.target.value)}}></input></label>\r\n                    <button value='Submit'></button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SigninScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}